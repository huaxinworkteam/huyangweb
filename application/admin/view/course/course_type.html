<!--_meta 作为公共模版分离出去-->
{include file="Common/meta" /}
<!--/meta 作为公共模版分离出去-->

<title>首页轮播管理 - 轮播图列表 - h-ui.admin.pro v1.0</title>
<meta name="keywords" content="h-ui.admin.pro v1.0,H-ui网站后台模版,后台模版下载,后台管理系统模版,HTML后台模版下载">
<meta name="description" content="h-ui.admin.pro v1.0，是一款由国人开发的轻量级扁平化网站后台模板，完全免费开源的网站后台管理系统模版，适合中小型CMS后台系统。">
</head>
<body>
<!--_menu 作为公共模版分离出去-->
{include file="Common/leftbar" /}
<!--/_menu 作为公共模版分离出去-->

<div class="Hui-admin-dislpayArrow">
    <a href="javascript:void(0);" onClick="displaynavbar(this)">
        <i class="Hui-iconfont Hui-iconfont-left">&#xe6d4;</i>
        <i class="Hui-iconfont Hui-iconfont-right">&#xe6d7;</i>
    </a>
</div>

<section class="Hui-admin-article-wrapper">
    <!--_header 作为公共模版分离出去-->
    {include file="Common/header" /}
    <!--/_header 作为公共模版分离出去-->

    <div class="Hui-admin-article">
        <nav class="breadcrumb" style="background-color:#fff;padding: 0 24px">
            首页
            <span class="c-gray en">/</span>
            课程管理
            <span class="c-gray en">/</span>
            课程分类
        </nav>

        <article id="app" class="Hui-admin-content clearfix">
            <div class="panel">
                <div class="panel-body">
                    <el-form :inline="true" :model="queryForm" ref="queryForm">
                        <el-form-item style="margin-bottom: 0;" prop="positionType">
                            <el-select v-model="queryForm.positionType" placeholder="请选择分类">
                                <el-option label="PC版" :value="1"></el-option>
                                <el-option label="手机版" :value="2"></el-option>
                                <el-option label="微信版" :value="3"></el-option>
                                <el-option label="微信小程序" :value="4"></el-option>
                            </el-select>
                          </el-form-item>
                          <el-form-item label="分类名称：" style="margin-bottom: 0;" prop="positionCode">
                            <el-input v-model="queryForm.positionCode" placeholder="请填写分类名称"></el-input>
                        </el-form-item>
                        <el-form-item style="margin-bottom: 0;">
                            <el-button type="primary" size="medium" icon="el-icon-search" @click="submitForm('queryForm')">查询</el-button>
                            <el-button size="medium" icon="el-icon-refresh-left" @click="resetForm('queryForm')">重置</el-button>
                        </el-form-item>
                    </el-form>
                </div>
            </div>
            <div class="panel mt-20">
                <div class="panel-body">
                    <div class="clearfix">
                        <el-button type="danger" size="medium"><i class="Hui-iconfont">&#xe6e2;</i> 批量删除</el-button>
                        <el-button type="primary" size="medium" @click="add('新增课程分类','{:url(\'admin/course/type_add\')}')"
                        ><i class="Hui-iconfont">&#xe600;</i> 添加分类</el-button>
                    </div>
                    <div class="mt-20 clearfix">  
                        <el-table :data="tableData" style="width: 100%" row-key="id" border lazy stripe
                            :load="load"  :tree-props="{hasChildren: 'hasChildren'}"
                            :header-cell-style="headClass" >
                            <el-table-column label="课程分类列表" style="width: 100%;">
                                <el-table-column type="selection" align="center"></el-table-column>
                                <el-table-column prop="id" label="ID" min-width="10%" header-align="center"></el-table-column>
                                <el-table-column prop="typeName" label="分类名称" min-width="30%" align="center"></el-table-column>
                                <el-table-column prop="typeLevel" label="分类等级" min-width="30%" align="center"></el-table-column>
                                <el-table-column prop="typeLevel" label="排序" min-width="10%" align="center"></el-table-column>
                                <el-table-column fixed="right" label="操作" width="150" min-width="20%" align="center"> 
                                    <template slot-scope="scope"> 
                                        <el-button @click="handleClick(scope.row)" type="text" size="small">查看</el-button>
                                        <el-button type="text" size="small">编辑</el-button>
                                    </template>
                                </el-table-column>
                            </el-table-column>
                        </el-table>
                        <!-- <table class="table table-border table-bordered table-bg table-hover table-sort">
                            <thead>
                            <tr>
                                <th scope="col" colspan="9">课程分类列表</th>
                            </tr>
                            <tr class="text-c">
                                <th width="25"><input type="checkbox"  id="ckAll" onclick="QuanXuan()"></th>
                                <th width="40">ID</th>
                                <th width="100">父级</th>
                                <th width="100">分类名称</th>
                                <th width="100">分类等级</th>
                                <th width="100">查看子分类</th>
                                <th width="100">排序</th>
                                <th width="100">操作</th>
                            </tr>
                            </thead>
                            <tbody>
                              
                            </tbody>
                        </table> -->
                    </div>
                </div>
            </div>
        </article>
    </div>
</section>

<!--_footer 作为公共模版分离出去-->
{include file="Common/footer" /}
<!--/_footer /作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" src="__ADMIN__/lib/datatables/1.10.15/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="__ADMIN__/lib/laypage/1.2/laypage.js"></script>
<script type="text/javascript" src="__ADMIN__/business/js/main.js"></script>

<script type="text/javascript">
    new Vue({
        el: '#app',
        data: {
            queryForm: {
                positionType: '',
                positionCode: ''
            },
            tableData: []
        },
        mounted() {
            http_post('/admin/course/courseType').then(res => {
                this.tableData = res.data;
            }).catch(err => {

            });
        },
        methods: {
            // 表头样式设置
            headClass () {
                return 'background: #f5fafe;';
            },
            // 表格样式设置
            rowClass () {
                // return 'text-align: center;';
            },
            load(tree, treeNode, resolve) {
                setTimeout(() => {
                    http_post('/admin/course/getSons', {id: tree.id}).then(res => {
                        resolve(res.data);
                    }).catch(err => {
                        treeNode.loading = false;
                    });
                }, 500);
            },
            submitForm(formName) {
                this.$refs[formName].validate((valid) => {
                    if (valid) {
                        // 提交数据的请求
                        var index = layer.load(0, {shade: false}); //0代表加载的风格，支持0-2
                        setTimeout(()=> {
                            location.replace('/admin/ads/searchLocation?positionType=' +
                            this.queryForm.positionType + '&positionCode=' + this.queryForm.positionCode);
                        }, 500);                            
                    } else {
                        layer.msg("查询条件不足");
                        return false;
                    }
                });
                
            },
            resetForm(formName) {
                this.$refs[formName].resetFields();
            },


             // 新增
            add(title, url) {
                var index = layer.open({
                    type: 2,
                    title: title,
                    content: url,
                    area: ['700px', '600px'],
                    end : function() {
                        window.location.reload();  // 刷新
                    }
                });

            }
        }
    });

</script>
<!--/请在上方写此页面业务相关的脚本-->
</body>
</html>
